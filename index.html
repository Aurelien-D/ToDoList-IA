<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TodoList IA - Refonte 2025</title>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#b17a50"> <!-- Wood Brown for theme color -->
</head>
<body>
    <!-- Header -->
    <header class="header-premium">
        <div class="header-content glass-effect">
            <div class="logo-section">
                <div class="logo-gradient">
                    <i class="fas fa-tasks"></i>
                </div>
                <h1>TodoList IA <span class="year-badge">2025</span></h1>
            </div>
            
            <div class="stats-realtime">
                <div class="stat-item">
                    <span class="stat-value" id="totalTasks">0</span>
                    <span class="stat-label">T√¢ches</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="completedToday">0</span>
                    <span class="stat-label">Termin√©es</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="productivityScore">0%</span>
                    <span class="stat-label">Productivit√©</span>
                </div>
            </div>
            
            <div class="header-actions">
                <button class="btn-glass" id="themeToggle" title="Changer de th√®me (Ctrl+D)">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="btn-glass btn-danger" id="resetApp" title="R√©initialiser">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Toolbar -->
    <nav class="toolbar-premium">
        <div class="toolbar-content glass-effect">
            <button class="tool-btn" id="voiceBtn" title="Dict√©e vocale (Ctrl+M)">
                <i class="fas fa-microphone"></i>
                <span>Dict√©e</span>
            </button>
            <button class="tool-btn" id="aiBtn" title="Assistant IA">
                <i class="fas fa-robot"></i>
                <span>IA</span>
            </button>
            <button class="tool-btn" id="searchBtn" title="Rechercher (Ctrl+K)">
                <i class="fas fa-search"></i>
                <span>Recherche</span>
            </button>
            <button class="tool-btn" id="filterBtn" title="Filtrer (Bient√¥t disponible)">
                <i class="fas fa-filter"></i>
                <span>Filtres</span>
            </button>
        </div>
    </nav>

    <!-- Main Interface -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar-analytics glass-effect" id="sidebar">
            <div class="sidebar-header">
                <h3>Dashboard</h3>
            </div>
            
            <div class="analytics-section">
                <div class="completion-score">
                    <div class="score-circle" id="completionCircle">
                        <span id="completionScore">0%</span>
                    </div>
                    <p>Taux de Compl√©tion</p>
                </div>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <i class="fas fa-list-ul"></i>
                        <div class="metric-info">
                            <span class="metric-value" id="todoCount">0</span>
                            <span class="metric-label">√Ä faire</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-spinner fa-spin"></i>
                        <div class="metric-info">
                            <span class="metric-value" id="inProgressCount">0</span>
                            <span class="metric-label">En cours</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-check-double"></i>
                        <div class="metric-info">
                            <span class="metric-value" id="doneCount">0</span>
                            <span class="metric-label">Termin√©es</span>
                        </div>
                    </div>
                </div>
                
                <div class="categories-stats">
                    <h4>Par Cat√©gorie</h4>
                    <div class="category-list" id="categoryStats">
                         <p class="empty-column-text">Aucune t√¢che cat√©goris√©e.</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Tasks Area -->
        <main class="tasks-area">
            <!-- Quick Add Form -->
            <div class="quick-add-section glass-effect" id="quickAddSection">
                <div class="add-task-form">
                    <input type="text" id="taskInput" placeholder="Nouvelle t√¢che... (N)" class="task-input-premium">
                    <input type="datetime-local" id="taskDueDate" class="task-input-premium" title="Date et heure d'√©ch√©ance">
                    <select id="categorySelect" class="category-select custom-select">
                        <option value="">Cat√©gorie</option>
                        <option value="Travail">üíº Travail</option>
                        <option value="Personnel">üë§ Personnel</option>
                        <option value="Urgent">üö® Urgent</option>
                        <option value="Shopping">üõí Shopping</option>
                        <option value="Sant√©">üè• Sant√©</option>
                        <option value="Projets">üìã Projets</option>
                    </select>
                    <select id="prioritySelect" class="priority-select custom-select">
                        <option value="">Priorit√©</option>
                        <option value="Basse">üü¢ Basse</option>
                        <option value="Normale">üü° Normale</option>
                        <option value="Haute">üü† Haute</option>
                        <option value="Critique">üî¥ Critique</option>
                    </select>
                    <button id="addTaskBtn" class="btn-add-premium" title="Ajouter la t√¢che">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <!-- Search Bar -->
            <div class="search-section" id="searchSection" style="display: none;">
                <div class="search-bar glass-effect">
                    <input type="text" id="searchInput" placeholder="Rechercher dans vos t√¢ches... (Esc pour fermer)" class="search-input">
                    <button id="clearSearch" class="btn-clear btn" title="Effacer la recherche">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Kanban Columns -->
            <div class="kanban-board">
                <div class="column-container glass-effect" data-column="todo">
                    <div class="column-header">
                        <div class="column-title">
                            <i class="fas fa-list-ul"></i>
                            <span>√Ä faire</span>
                        </div>
                        <div class="task-counter" id="todoCounter">0</div>
                    </div>
                    <div class="tasks-list" id="todoList">
                         <p class="empty-column-text">Aucune t√¢che ici. Ajoutez-en une !</p>
                    </div>
                </div>

                <div class="column-container glass-effect" data-column="inprogress">
                    <div class="column-header">
                        <div class="column-title">
                            <i class="fas fa-spinner"></i>
                            <span>En cours</span>
                        </div>
                        <div class="task-counter" id="inprogressCounter">0</div>
                    </div>
                    <div class="tasks-list" id="inprogressList">
                        <p class="empty-column-text">Aucune t√¢che ici.</p>
                    </div>
                </div>

                <div class="column-container glass-effect" data-column="done">
                    <div class="column-header">
                        <div class="column-title">
                            <i class="fas fa-check-double"></i>
                            <span>Termin√©</span>
                        </div>
                        <div class="task-counter" id="doneCounter">0</div>
                    </div>
                    <div class="tasks-list" id="doneList">
                        <p class="empty-column-text">Aucune t√¢che ici.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- AI Modal -->
    <div class="modal-overlay" id="aiModal">
        <div class="modal-content glass-effect ai-modal">
            <div class="modal-header">
                <h3><i class="fas fa-robot"></i> Assistant IA</h3>
                <button class="modal-close btn" data-modal="aiModal" title="Fermer">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-description">Optimisez votre productivit√© avec l'intelligence artificielle.</p>
                <div class="ai-features">
                    <button class="ai-feature-btn btn" id="generateSubtasksModalBtn">
                        <i class="fas fa-sitemap"></i>
                        <div>
                            <strong>G√©n√©rer des sous-t√¢ches</strong>
                            <p>L'IA d√©compose votre t√¢che active en √©tapes.</p>
                        </div>
                    </button>
                    <button class="ai-feature-btn btn" id="categorizeTaskModalBtn">
                        <i class="fas fa-tags"></i>
                        <div>
                            <strong>Cat√©goriser automatiquement</strong>
                            <p>Classification intelligente de la t√¢che active.</p>
                        </div>
                    </button>
                    <button class="ai-feature-btn btn" id="suggestPrioritiesModalBtn">
                        <i class="fas fa-sort-amount-up"></i>
                        <div>
                            <strong>Sugg√©rer les priorit√©s</strong>
                            <p>Analyse du contenu pour prioriser la t√¢che active.</p>
                        </div>
                    </button>
                </div>
                <div class="ai-status" id="aiStatus">
                    <!-- Status updated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Reset Modal -->
    <div class="modal-overlay" id="resetModal">
        <div class="modal-content glass-effect reset-modal">
            <div class="modal-header">
                <h3><i class="fas fa-exclamation-triangle"></i> R√©initialisation Compl√®te</h3>
                 <button class="modal-close btn" data-modal="resetModal" title="Fermer">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p class="warning-text">Cette action supprimera TOUTES vos t√¢ches et donn√©es de fa√ßon permanente !</p>
                <p>Tapez <strong>RESET</strong> pour confirmer :</p>
                <input type="text" id="resetConfirmInput" placeholder="Tapez RESET" class="form-control">
                <div class="countdown-display" id="resetCountdown"></div>
                <div class="modal-actions">
                    <button class="btn btn--secondary" id="cancelReset">Annuler</button>
                    <button class="btn btn--danger" id="confirmReset" disabled>
                        R√©initialiser
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Task Details Modal (NEW) -->
    <div class="modal-overlay" id="taskDetailsModal">
        <div class="modal-content glass-effect task-details-modal">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> D√©tails de la T√¢che</h3>
                <button class="modal-close btn" data-modal="taskDetailsModal" title="Fermer">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="detailsTaskId">
                <div class="form-group">
                    <label for="detailsTaskTitle" class="form-label">Titre de la t√¢che :</label>
                    <input type="text" id="detailsTaskTitle" class="form-control">
                </div>
                <div class="form-group">
                    <label for="detailsTaskDueDate" class="form-label">Date d'√©ch√©ance :</label>
                    <input type="datetime-local" id="detailsTaskDueDate" class="form-control">
                </div>
                <div class="form-group">
                    <label for="detailsTaskCategory" class="form-label">Cat√©gorie :</label>
                    <select id="detailsTaskCategory" class="custom-select">
                        <option value="">Aucune</option>
                        <option value="Travail">üíº Travail</option>
                        <option value="Personnel">üë§ Personnel</option>
                        <option value="Urgent">üö® Urgent</option>
                        <option value="Shopping">üõí Shopping</option>
                        <option value="Sant√©">üè• Sant√©</option>
                        <option value="Projets">üìã Projets</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="detailsTaskPriority" class="form-label">Priorit√© :</label>
                    <select id="detailsTaskPriority" class="custom-select">
                        <option value="Basse">üü¢ Basse</option>
                        <option value="Normale">üü° Normale</option>
                        <option value="Haute">üü† Haute</option>
                        <option value="Critique">üî¥ Critique</option>
                    </select>
                </div>

                <div class="subtasks-section">
                    <h4><i class="fas fa-list-check"></i> Sous-t√¢ches</h4>
                    <div id="detailsSubtaskList" class="details-subtask-list">
                        <p class="empty-column-text">Aucune sous-t√¢che.</p>
                    </div>
                    <div class="add-subtask-form">
                        <input type="text" id="detailsNewSubtaskTitle" class="form-control" placeholder="Nouvelle sous-t√¢che...">
                        <button id="detailsAddSubtaskBtn" class="btn btn--primary btn--sm">
                            <i class="fas fa-plus"></i> Ajouter
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="detailsDeleteTaskBtn" class="btn btn--danger"><i class="fas fa-trash"></i> Supprimer T√¢che</button>
                <button id="detailsSaveChangesBtn" class="btn btn--primary"><i class="fas fa-save"></i> Sauvegarder</button>
            </div>
        </div>
    </div>


    <!-- Notifications Area -->
    <div class="notifications-container" id="notificationsContainer"></div>

    <!-- Status Bar -->
    <div class="status-bar">
        <div class="status-item">
            <i class="fas fa-clock"></i>
            <span class="clock" id="realTimeClock">--:--:--</span>
        </div>
        <div class="status-item">
            <i class="fas fa-wifi" id="connectionStatus"></i>
            <span id="connectionStatusText">En ligne</span>
        </div>
        <div class="status-item">
            <i class="fas fa-sync-alt" id="syncStatus"></i>
            <span id="syncStatusText">Synchronis√©</span>
        </div>
        <div class="status-item">
            <i class="fas fa-save" id="saveStatus"></i>
            <span id="saveStatusText">Sauvegard√©</span>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner-container">
            <div class="loading-spinner"></div>
            <p>G√©n√©ration IA en cours...</p>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>